# {{ service_title }}

{{ description }}

## Features

- FastAPI {{ version }}
- Dapr sidecar integration
{% if has_pubsub %}- Pub/Sub messaging (Kafka)
{% endif %}
{% if has_state %}- State management
{% endif %}
{% if has_invocation %}- Service invocation
{% endif %}
{% if has_agent %}- OpenAI agent integration
{% endif %}
- Health check endpoints
- Kubernetes manifests

## Local Development

### Prerequisites

- Docker and Docker Compose
- Python {{ python_version }}

### Setup

1. Copy environment template:
```bash
cp .env.example .env
```

2. Edit `.env` with your configuration

3. Start services:
```bash
docker-compose up -d
```

4. View logs:
```bash
docker-compose logs -f {{ service_name }}
```

### Testing

```bash
# Health check
curl http://localhost:{{ port }}/health

# Readiness check
curl http://localhost:{{ port }}/health/ready

# API docs
open http://localhost:{{ port }}/docs
```

## Kubernetes Deployment

### Deploy to Kubernetes

```bash
# Create namespace
kubectl create namespace {{ service_name }}

# Deploy components
kubectl apply -f k8s/components/ -n {{ service_name }}

# Deploy configmap
kubectl apply -f k8s/configmap.yaml -n {{ service_name }}

{% if has_agent %}
# Create secret for OpenAI API key
kubectl create secret generic {{ service_name }}-secrets \
  --from-literal=OPENAI_API_KEY=your-api-key-here \
  -n {{ service_name }}
{% endif %}

# Deploy service
kubectl apply -f k8s/ -n {{ service_name }}
```

### Check deployment

```bash
# Get pods
kubectl get pods -n {{ service_name }}

# Get services
kubectl get svc -n {{ service_name }}

# View logs
kubectl logs -f deployment/{{ service_name }} -n {{ service_name }}
```

### Port forward to local

```bash
kubectl port-forward -n {{ service_name }} deployment/{{ service_name }} {{ port }}:{{ port }}
```

## Configuration

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `APP_NAME` | Service name | `{{ service_name }}` |
| `APP_VERSION` | Service version | `{{ version }}` |
| `LOG_LEVEL` | Logging level | `INFO` |
| `PORT` | Application port | `{{ port }}` |
| `DAPR_HTTP_PORT` | Dapr HTTP port | `3500` |
{% if has_agent %}
| `OPENAI_API_KEY` | OpenAI API key | *required* |
| `OPENAI_MODEL` | OpenAI model | `{{ openai_model }}` |
{% endif %}
{% if has_state %}
| `STATE_STORE_NAME` | Dapr state store name | `state-store` |
{% endif %}
{% if has_pubsub %}
| `PUBSUB_COMPONENT_NAME` | Dapr pubsub component | `kafka-pubsub` |
{% endif %}

## Development

### Run locally without Docker

```bash
# Install dependencies
pip install -e .

# Run development server
uvicorn app.main:app --reload --host 0.0.0.0 --port {{ port }}
```

### Run tests

```bash
# Install test dependencies
pip install -e ".[dev]"

# Run tests
pytest -v

# Run tests with coverage
pytest --cov=app --cov-report=html
```

## Health Endpoints

- `GET /health` - Liveness probe
- `GET /health/ready` - Readiness probe (checks Dapr connectivity)
- `GET /health/live` - Alias for liveness probe

## Generated by

[fastapi-dapr-agent](https://github.com/your-org/hackathon3) skill
